(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(16),o=t.n(c),u=(t(21),t(3)),i=t(0),a=function(e){return Object(i.jsxs)("div",{children:["filter shown with:\xa0",Object(i.jsx)("input",{type:"text",value:e.filteredName,onChange:function(n){return e.onChange(n,e.setValue)()}})]})},s=function(e){var n=e.message,t=e.error;return void 0===n?null:Object(i.jsx)("div",{className:"error"===t?"error":"success",children:n})},l=function(e){return Object(i.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(i.jsxs)("div",{children:["name:\xa0",Object(i.jsx)("input",{type:"text",value:e.newName,onChange:function(n){return e.onChange(n,e.setName)()}})]}),Object(i.jsxs)("div",{children:["number:\xa0",Object(i.jsx)("input",{type:"text",value:e.newNumber,onChange:function(n){return e.onChange(n,e.setNumber)()}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){return Object(i.jsxs)("li",{children:[e.person.name," ",e.person.number,"\xa0",Object(i.jsx)("button",{type:"button",onClick:e.onClick,children:"delete"})]})},f=function(e){return Object(i.jsx)("ul",{children:e.persons.filter((function(n){return""===e.filteredName.trim()||n.name.toLowerCase().startsWith(e.filteredName.trim().toLowerCase())?n:null})).map((function(n){return Object(i.jsx)(d,{person:n,onClick:function(){return e.onClick(n.id)}},n.name)}))})},m=t(4),b=t.n(m),j="/api/persons",h=function(){return b.a.get(j).then((function(e){return e.data}))},p=function(e){return b.a.post(j,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},x=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),d=Object(u.a)(o,2),m=d[0],b=d[1],j=Object(r.useState)(""),x=Object(u.a)(j,2),w=x[0],g=x[1],C=Object(r.useState)(""),N=Object(u.a)(C,2),y=N[0],k=N[1],S=Object(r.useState)(null),L=Object(u.a)(S,2),T=L[0],A=L[1];Object(r.useEffect)((function(){h().then((function(e){c(e)}))}),[]);var D=function(e,n){var t=e.target;return function(){n(t.value)}};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(s,{message:null===T||void 0===T?void 0:T.msg,error:null===T||void 0===T?void 0:T.type}),Object(i.jsx)(a,{filteredName:y,onChange:D,setValue:k}),Object(i.jsx)("h3",{children:"Add a new"}),Object(i.jsx)(l,{onSubmit:function(e){if(e.preventDefault(),""!==w.trim())if(b(""),g(""),t.map((function(e){return e.name.toLowerCase()})).includes(m.trim().toLowerCase())){if(window.confirm("".concat(m.trim()," is already added to phonebook, replace the old number with a new one?"))){var n=t.filter((function(e){return e.name===m}))[0],r=n.id,o=n.name;return void O(r,{name:o,number:w}).then((function(e){var n=t.map((function(n){return n.id===r?e:n}));c(n),A({msg:"Updated ".concat(o),type:"success"}),setTimeout((function(){A(null)}),3e3)})).catch((function(e){var n=t.filter((function(e){return e.name!==o}));c(n),A({msg:"Information of ".concat(o," has already been removed from server"),type:"error"}),setTimeout((function(){A(null)}),3e3)}))}}else p({name:m.trim(),number:w}).then((function(e){c(t.concat(e)),A({msg:"Added ".concat(m),type:"success"}),setTimeout((function(){A(null)}),3e3)})),k("");else alert("You must enter a phone number")},onChange:D,setName:b,setNumber:g,newName:m,newNumber:w}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(f,{persons:t,filteredName:y,onClick:function(e){var n=t.filter((function(n){return n.id===e}))[0].name;window.confirm("Delete ".concat(n,"?"))&&v(e).then((function(n){var r=t.filter((function(n){return n.id!==e}));c(r)}))}})]})};o.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.9e42da04.chunk.js.map