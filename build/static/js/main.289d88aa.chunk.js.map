{"version":3,"sources":["components/Filter.js","components/Notification.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","props","type","value","filteredName","onChange","e","setValue","Notification","message","error","undefined","className","PersonForm","onSubmit","newName","setName","newNumber","setNumber","Person","person","name","number","onClick","Persons","persons","filter","trim","toLowerCase","startsWith","map","id","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","setNewName","setNewNumber","setFilteredName","setMessage","useEffect","personService","initialPersons","inputChangeHandler","setField","target","msg","event","preventDefault","includes","window","confirm","console","log","personToUpdate","resp","updatedList","setTimeout","catch","err","returnedPerson","concat","alert","res","restPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.289d88aa.chunk.js","sourcesContent":["const Filter = (props) => {\n  return (\n    <div>\n      filter shown with:&nbsp;\n      <input\n        type=\"text\"\n        value={props.filteredName}\n        onChange={(e) => props.onChange(e, props.setValue)()}\n      />\n    </div>\n  );\n};\n\nexport default Filter;\n","const Notification = ({ message, error }) => {\n  if (message === undefined) {\n    return null;\n  }\n  return (\n    <div className={error === 'error' ? 'error' : 'success'}>{message}</div>\n  );\n};\n\nexport default Notification;\n","const PersonForm = (props) => {\n  return (\n    <form onSubmit={props.onSubmit}>\n      <div>\n        name:&nbsp;\n        <input\n          type=\"text\"\n          value={props.newName}\n          onChange={(e) => props.onChange(e, props.setName)()}\n        />\n      </div>\n      <div>\n        number:&nbsp;\n        <input\n          type=\"text\"\n          value={props.newNumber}\n          onChange={(e) => props.onChange(e, props.setNumber)()}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","const Person = (props) => (\n  <li>\n    {props.person.name} {props.person.number}&nbsp;\n    <button type=\"button\" onClick={props.onClick}>\n      delete\n    </button>\n  </li>\n);\n\nexport default Person;\n","import Person from './Person';\n\nconst Persons = (props) => {\n  return (\n    <ul>\n      {props.persons\n        .filter((person) => {\n          if (props.filteredName.trim() === '') return person;\n          if (\n            person.name\n              .toLowerCase()\n              .startsWith(props.filteredName.trim().toLowerCase())\n          ) {\n            return person;\n          }\n          return null;\n        })\n        .map((person) => (\n          <Person\n            key={person.name}\n            person={person}\n            onClick={() => props.onClick(person.id)}\n          />\n        ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, update, remove };\n","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport Notification from './components/Notification';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filteredName, setFilteredName] = useState('');\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addPersonHandler = (event) => {\n    event.preventDefault();\n\n    if (newNumber.trim() === '') {\n      alert('You must enter a phone number');\n      return;\n    }\n\n    setNewName('');\n    setNewNumber('');\n\n    const names = persons.map((person) => person.name.toLowerCase());\n    if (names.includes(newName.trim().toLowerCase())) {\n      if (\n        window.confirm(\n          `${newName.trim()} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        console.log(persons);\n\n        const personToUpdate = persons.filter(\n          (person) =>\n            person.name.trim().toLowerCase() === newName.trim().toLowerCase()\n        )[0];\n        const { id, name } = personToUpdate;\n        personService\n          .update(id, { name, number: newNumber })\n          .then((resp) => {\n            const updatedList = persons.map((person) => {\n              if (person.id === id) return resp;\n              return person;\n            });\n            setPersons(updatedList);\n            setMessage({ msg: `Updated ${name}`, type: 'success' });\n            setTimeout(() => setMessage(null), 3000);\n          })\n          .catch((err) => {\n            const msg = err.response.data.error;\n            if (msg.startsWith('Not Found')) {\n              const updatedList = persons.filter(\n                (person) => person.name !== name\n              );\n              setPersons(updatedList);\n            }\n            setMessage({ msg, type: 'error' });\n            setTimeout(() => setMessage(null), 3000);\n          });\n        return;\n      }\n      return;\n    } else {\n      personService\n        .create({ name: newName.trim(), number: newNumber })\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setMessage({ msg: `Added ${newName}`, type: 'success' });\n          setTimeout(() => setMessage(null), 3000);\n        });\n    }\n\n    setFilteredName('');\n  };\n\n  const handleDelete = (id) => {\n    const { name } = persons.filter((person) => person.id === id)[0];\n    if (window.confirm(`Delete ${name}?`)) {\n      personService.remove(id).then((res) => {\n        const restPersons = persons.filter((person) => person.id !== id);\n        setPersons(restPersons);\n      });\n    }\n  };\n\n  const inputChangeHandler =\n    ({ target }, setField) =>\n    () => {\n      setField(target.value);\n    };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message?.msg} error={message?.type} />\n      <Filter\n        filteredName={filteredName}\n        onChange={inputChangeHandler}\n        setValue={setFilteredName}\n      />\n      <h3>Add a new</h3>\n      <PersonForm\n        onSubmit={addPersonHandler}\n        onChange={inputChangeHandler}\n        setName={setNewName}\n        setNumber={setNewNumber}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        filteredName={filteredName}\n        onClick={handleDelete}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}