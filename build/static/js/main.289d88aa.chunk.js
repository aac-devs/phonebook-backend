(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(16),c=n.n(o),u=(n(21),n(3)),i=n(0),a=function(e){return Object(i.jsxs)("div",{children:["filter shown with:\xa0",Object(i.jsx)("input",{type:"text",value:e.filteredName,onChange:function(t){return e.onChange(t,e.setValue)()}})]})},s=function(e){var t=e.message,n=e.error;return void 0===t?null:Object(i.jsx)("div",{className:"error"===n?"error":"success",children:t})},l=function(e){return Object(i.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(i.jsxs)("div",{children:["name:\xa0",Object(i.jsx)("input",{type:"text",value:e.newName,onChange:function(t){return e.onChange(t,e.setName)()}})]}),Object(i.jsxs)("div",{children:["number:\xa0",Object(i.jsx)("input",{type:"text",value:e.newNumber,onChange:function(t){return e.onChange(t,e.setNumber)()}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){return Object(i.jsxs)("li",{children:[e.person.name," ",e.person.number,"\xa0",Object(i.jsx)("button",{type:"button",onClick:e.onClick,children:"delete"})]})},f=function(e){return Object(i.jsx)("ul",{children:e.persons.filter((function(t){return""===e.filteredName.trim()||t.name.toLowerCase().startsWith(e.filteredName.trim().toLowerCase())?t:null})).map((function(t){return Object(i.jsx)(d,{person:t,onClick:function(){return e.onClick(t.id)}},t.name)}))})},m=n(4),b=n.n(m),j="/api/persons",h=function(){return b.a.get(j).then((function(e){return e.data}))},p=function(e){return b.a.post(j,e).then((function(e){return e.data}))},O=function(e,t){return b.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},x=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),d=Object(u.a)(c,2),m=d[0],b=d[1],j=Object(r.useState)(""),x=Object(u.a)(j,2),w=x[0],C=x[1],g=Object(r.useState)(""),N=Object(u.a)(g,2),k=N[0],y=N[1],S=Object(r.useState)(null),L=Object(u.a)(S,2),T=L[0],A=L[1];Object(r.useEffect)((function(){h().then((function(e){o(e)}))}),[]);var D=function(e,t){var n=e.target;return function(){t(n.value)}};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(s,{message:null===T||void 0===T?void 0:T.msg,error:null===T||void 0===T?void 0:T.type}),Object(i.jsx)(a,{filteredName:k,onChange:D,setValue:y}),Object(i.jsx)("h3",{children:"Add a new"}),Object(i.jsx)(l,{onSubmit:function(e){if(e.preventDefault(),""!==w.trim())if(b(""),C(""),n.map((function(e){return e.name.toLowerCase()})).includes(m.trim().toLowerCase())){if(window.confirm("".concat(m.trim()," is already added to phonebook, replace the old number with a new one?"))){console.log(n);var t=n.filter((function(e){return e.name.trim().toLowerCase()===m.trim().toLowerCase()}))[0],r=t.id,c=t.name;return void O(r,{name:c,number:w}).then((function(e){var t=n.map((function(t){return t.id===r?e:t}));o(t),A({msg:"Updated ".concat(c),type:"success"}),setTimeout((function(){return A(null)}),3e3)})).catch((function(e){var t=e.response.data.error;if(t.startsWith("Not Found")){var r=n.filter((function(e){return e.name!==c}));o(r)}A({msg:t,type:"error"}),setTimeout((function(){return A(null)}),3e3)}))}}else p({name:m.trim(),number:w}).then((function(e){o(n.concat(e)),A({msg:"Added ".concat(m),type:"success"}),setTimeout((function(){return A(null)}),3e3)})),y("");else alert("You must enter a phone number")},onChange:D,setName:b,setNumber:C,newName:m,newNumber:w}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(f,{persons:n,filteredName:k,onClick:function(e){var t=n.filter((function(t){return t.id===e}))[0].name;window.confirm("Delete ".concat(t,"?"))&&v(e).then((function(t){var r=n.filter((function(t){return t.id!==e}));o(r)}))}})]})};c.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.289d88aa.chunk.js.map